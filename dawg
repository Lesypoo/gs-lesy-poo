pipeline {
  agent any
  tools { nodejs 'nodejs-lts' } // or run 'npm' installed on the agent
  stages {
    stage('Checkout') { steps { checkout scm } }
    stage('Install')  { steps { sh 'npm ci || npm i' } }
    stage('Test')     { steps { sh 'npm test' } }
    stage('Build')    { steps { sh 'npm pack' } }
    stage('Archive')  { steps { archiveArtifacts artifacts: '*.tgz', fingerprint: true } }
  }
}
